<!-- ./client/index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" label="url" id="url" />
    <button onClick="sendMsg()">Inspect</button>

    <div id="urlsc" style="margin-top: 8px;"></div>
    <textarea id="debug" style="width: 600px; height: 400px;"></textarea>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.1/socket.io.js"></script>
    <script>
      const socket = io("http://localhost:3002");

      var i = 0;

      function sendMsg() {
        document.getElementById('debug').innerHTML = "";
        i = 0;
        socket.emit("send-url", document.getElementById('url').value);
      }

      socket.on("extract", function (msg) {
        i++;
        console.log(msg);
        document.getElementById('urlsc').innerHTML = "Blocked: " + i;
        document.getElementById('debug').innerHTML += msg + "\n";
      });

      socket.on("1. extract-request-redirected", function (url) {
        console.warn("extract-request-redirected: ", url);
      });
       socket.on("2. extract-request-whitelisted", function (url) {
        console.warn("extract-request-whitelisted: ", url);
      });
        socket.on("3. extract-csp-injected", function (url) {
        console.warn("extract-csp-injected: ", url);
      });
      socket.on("4. extract-script-injected", function (url) {
        console.warn("extract-script-injected: ", url);
      });
      socket.on("extract-style-injected", function (url) {
        console.warn("5. extract-style-injected: ", url);
      });
    </script>
  </body>
</html>
